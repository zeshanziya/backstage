"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[2752],{"../node_modules/@material-ui/icons/Star.js":(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__("../node_modules/@babel/runtime/helpers/interopRequireDefault.js"),_interopRequireWildcard=__webpack_require__("../node_modules/@babel/runtime/helpers/interopRequireWildcard.js");exports.A=void 0;var React=_interopRequireWildcard(__webpack_require__("./node_modules/react/index.js")),_default=(0,_interopRequireDefault(__webpack_require__("../node_modules/@material-ui/icons/utils/createSvgIcon.js")).default)(React.createElement("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");exports.A=_default},"../plugins/home/src/homePageComponents/StarredEntities/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Content:()=>Content});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),api=__webpack_require__("../plugins/catalog-react/src/api.ts"),ref=__webpack_require__("../packages/catalog-model/src/entity/ref.ts"),useApi=__webpack_require__("../packages/core-plugin-api/src/apis/system/useApi.tsx"),react=__webpack_require__("./node_modules/react/index.js"),useObservable=__webpack_require__("../node_modules/react-use/esm/useObservable.js"),StarredEntitiesApi=__webpack_require__("../plugins/catalog-react/src/apis/StarredEntitiesApi/StarredEntitiesApi.ts");function getEntityRef(entityOrRef){return"string"==typeof entityOrRef?entityOrRef:(0,ref.U2)(entityOrRef)}var Progress=__webpack_require__("../packages/core-components/src/components/Progress/Progress.tsx"),ResponseErrorPanel=__webpack_require__("../packages/core-components/src/components/ResponseErrorPanel/ResponseErrorPanel.tsx"),List=__webpack_require__("../node_modules/@material-ui/core/esm/List/List.js"),Typography=__webpack_require__("../node_modules/@material-ui/core/esm/Typography/Typography.js"),Tabs=__webpack_require__("../node_modules/@material-ui/core/esm/Tabs/Tabs.js"),Tab=__webpack_require__("../node_modules/@material-ui/core/esm/Tab/Tab.js"),useAsync=__webpack_require__("../node_modules/react-use/esm/useAsync.js"),routes=__webpack_require__("../plugins/catalog-react/src/routes.ts"),ListItem=__webpack_require__("../node_modules/@material-ui/core/esm/ListItem/ListItem.js"),ListItemIcon=__webpack_require__("../node_modules/@material-ui/core/esm/ListItemIcon/ListItemIcon.js"),Tooltip=__webpack_require__("../node_modules/@material-ui/core/esm/Tooltip/Tooltip.js"),IconButton=__webpack_require__("../node_modules/@material-ui/core/esm/IconButton/IconButton.js"),ListItemText=__webpack_require__("../node_modules/@material-ui/core/esm/ListItemText/ListItemText.js"),dist=__webpack_require__("../node_modules/react-router-dom/dist/index.js"),useRouteRef=__webpack_require__("../packages/core-plugin-api/src/routing/useRouteRef.tsx"),Star=__webpack_require__("../node_modules/@material-ui/icons/Star.js");const StarredEntityListItem=({entity,onToggleStarredEntity})=>{const catalogEntityRoute=(0,useRouteRef.S)(routes.s);var _entity_metadata_title;return(0,jsx_runtime.jsxs)(ListItem.A,{children:[(0,jsx_runtime.jsx)(ListItemIcon.A,{children:(0,jsx_runtime.jsx)(Tooltip.Ay,{title:"Remove from starred",children:(0,jsx_runtime.jsx)(IconButton.A,{edge:"end","aria-label":"unstar",onClick:()=>onToggleStarredEntity(entity),children:(0,jsx_runtime.jsx)(Star.A,{style:{color:"#f3ba37"}})})})}),(0,jsx_runtime.jsx)(dist.N_,{to:catalogEntityRoute((0,routes.$)(entity)),children:(0,jsx_runtime.jsx)(ListItemText.A,{primary:null!==(_entity_metadata_title=entity.metadata.title)&&void 0!==_entity_metadata_title?_entity_metadata_title:entity.metadata.name})})]},(0,ref.U2)(entity))};try{StarredEntityListItem.displayName="StarredEntityListItem",StarredEntityListItem.__docgenInfo={description:"",displayName:"StarredEntityListItem",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"Entity"}},onToggleStarredEntity:{defaultValue:null,description:"",name:"onToggleStarredEntity",required:!0,type:{name:"(entity: Entity) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../plugins/home/src/components/StarredEntityListItem/StarredEntityListItem.tsx#StarredEntityListItem"]={docgenInfo:StarredEntityListItem.__docgenInfo,name:"StarredEntityListItem",path:"../plugins/home/src/components/StarredEntityListItem/StarredEntityListItem.tsx#StarredEntityListItem"})}catch(__react_docgen_typescript_loader_error){}const Content=({noStarredEntitiesMessage,groupByKind})=>{var _entities_value,_entities_value1;const catalogApi=(0,useApi.gf)(api.v),{starredEntities,toggleStarredEntity}=function useStarredEntities(){const starredEntitiesApi=(0,useApi.gf)(StarredEntitiesApi.a),starredEntities=(0,useObservable.A)((0,react.useMemo)((()=>starredEntitiesApi.starredEntitie$()),[starredEntitiesApi]),new Set),isStarredEntity=(0,react.useCallback)((entityOrRef=>starredEntities.has(getEntityRef(entityOrRef))),[starredEntities]),toggleStarredEntity=(0,react.useCallback)((entityOrRef=>starredEntitiesApi.toggleStarred(getEntityRef(entityOrRef)).then()),[starredEntitiesApi]);return{starredEntities,toggleStarredEntity,isStarredEntity}}(),[activeTab,setActiveTab]=react.useState(0),entities=(0,useAsync.A)((async()=>starredEntities.size?(await catalogApi.getEntitiesByRefs({entityRefs:[...starredEntities],fields:["kind","metadata.namespace","metadata.name","metadata.title"]})).items.filter((e=>!!e)):[]),[catalogApi,starredEntities]);if(0===starredEntities.size)return(0,jsx_runtime.jsx)(Typography.A,{variant:"body1",children:noStarredEntitiesMessage||"Click the star beside an entity name to add it to this list!"});if(entities.loading)return(0,jsx_runtime.jsx)(Progress.k,{});const groupedEntities={};null===(_entities_value=entities.value)||void 0===_entities_value||_entities_value.forEach((entity=>{const kind=entity.kind;groupedEntities[kind]||(groupedEntities[kind]=[]),groupedEntities[kind].push(entity)}));const groupByKindEntries=Object.entries(groupedEntities);return entities.error?(0,jsx_runtime.jsx)(ResponseErrorPanel._,{error:entities.error}):(0,jsx_runtime.jsxs)("div",{children:[!groupByKind&&(0,jsx_runtime.jsx)(List.A,{children:null===(_entities_value1=entities.value)||void 0===_entities_value1?void 0:_entities_value1.sort(((a,b)=>{var _a_metadata_title,_b_metadata_title;return(null!==(_a_metadata_title=a.metadata.title)&&void 0!==_a_metadata_title?_a_metadata_title:a.metadata.name).localeCompare(null!==(_b_metadata_title=b.metadata.title)&&void 0!==_b_metadata_title?_b_metadata_title:b.metadata.name)})).map((entity=>(0,jsx_runtime.jsx)(StarredEntityListItem,{entity,onToggleStarredEntity:toggleStarredEntity},(0,ref.U2)(entity))))}),groupByKind&&(0,jsx_runtime.jsx)(Tabs.A,{value:activeTab,onChange:(_,newValue)=>setActiveTab(newValue),variant:"scrollable",scrollButtons:"auto","aria-label":"entity-tabs",children:groupByKindEntries.map((([kind])=>(0,jsx_runtime.jsx)(Tab.A,{label:kind},kind)))}),groupByKind&&groupByKindEntries.map((([kind,entitiesByKind],index)=>(0,jsx_runtime.jsx)("div",{hidden:groupByKind&&activeTab!==index,children:(0,jsx_runtime.jsx)(List.A,{children:null==entitiesByKind?void 0:entitiesByKind.sort(((a,b)=>{var _a_metadata_title,_b_metadata_title;return(null!==(_a_metadata_title=a.metadata.title)&&void 0!==_a_metadata_title?_a_metadata_title:a.metadata.name).localeCompare(null!==(_b_metadata_title=b.metadata.title)&&void 0!==_b_metadata_title?_b_metadata_title:b.metadata.name)})).map((entity=>(0,jsx_runtime.jsx)(StarredEntityListItem,{entity,onToggleStarredEntity:toggleStarredEntity},(0,ref.U2)(entity))))})},kind)))]})};try{Content.displayName="Content",Content.__docgenInfo={description:"",displayName:"Content",props:{noStarredEntitiesMessage:{defaultValue:null,description:"",name:"noStarredEntitiesMessage",required:!1,type:{name:"any"}},groupByKind:{defaultValue:null,description:"",name:"groupByKind",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../plugins/home/src/homePageComponents/StarredEntities/Content.tsx#Content"]={docgenInfo:Content.__docgenInfo,name:"Content",path:"../plugins/home/src/homePageComponents/StarredEntities/Content.tsx#Content"})}catch(__react_docgen_typescript_loader_error){}}}]);