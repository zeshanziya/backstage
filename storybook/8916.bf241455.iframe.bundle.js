"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[8916],{"../node_modules/@material-ui/icons/Star.js":(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__("../node_modules/@babel/runtime/helpers/interopRequireDefault.js"),_interopRequireWildcard=__webpack_require__("../node_modules/@babel/runtime/helpers/interopRequireWildcard.js");exports.Z=void 0;var React=_interopRequireWildcard(__webpack_require__("./node_modules/react/index.js")),_default=(0,_interopRequireDefault(__webpack_require__("../node_modules/@material-ui/icons/utils/createSvgIcon.js")).default)(React.createElement("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");exports.Z=_default},"../plugins/home/src/homePageComponents/StarredEntities/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Content:()=>Content});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),api=__webpack_require__("../plugins/catalog-react/src/api.ts"),routes=__webpack_require__("../plugins/catalog-react/src/routes.ts"),ref=__webpack_require__("../packages/catalog-model/src/entity/ref.ts"),useApi=__webpack_require__("../packages/core-plugin-api/src/apis/system/useApi.tsx"),react=__webpack_require__("./node_modules/react/index.js"),useObservable=__webpack_require__("../node_modules/react-use/lib/useObservable.js"),StarredEntitiesApi=__webpack_require__("../plugins/catalog-react/src/apis/StarredEntitiesApi/StarredEntitiesApi.ts");function getEntityRef(entityOrRef){return"string"==typeof entityOrRef?entityOrRef:(0,ref.eE)(entityOrRef)}var useRouteRef=__webpack_require__("../packages/core-plugin-api/src/routing/useRouteRef.tsx"),Progress=__webpack_require__("../packages/core-components/src/components/Progress/Progress.tsx"),ResponseErrorPanel=__webpack_require__("../packages/core-components/src/components/ResponseErrorPanel/ResponseErrorPanel.tsx"),Link=__webpack_require__("../packages/core-components/src/components/Link/Link.tsx"),Typography=__webpack_require__("../node_modules/@material-ui/core/esm/Typography/Typography.js"),List=__webpack_require__("../node_modules/@material-ui/core/esm/List/List.js"),ListItem=__webpack_require__("../node_modules/@material-ui/core/esm/ListItem/ListItem.js"),ListItemText=__webpack_require__("../node_modules/@material-ui/core/esm/ListItemText/ListItemText.js"),ListItemSecondaryAction=__webpack_require__("../node_modules/@material-ui/core/esm/ListItemSecondaryAction/ListItemSecondaryAction.js"),Tooltip=__webpack_require__("../node_modules/@material-ui/core/esm/Tooltip/Tooltip.js"),IconButton=__webpack_require__("../node_modules/@material-ui/core/esm/IconButton/IconButton.js"),Star=__webpack_require__("../node_modules/@material-ui/icons/Star.js"),useAsync=__webpack_require__("../node_modules/react-use/lib/useAsync.js");const Content=props=>{var _entities_value;const catalogApi=(0,useApi.h_)(api.A),catalogEntityRoute=(0,useRouteRef.t)(routes.w),{starredEntities,toggleStarredEntity}=function useStarredEntities(){const starredEntitiesApi=(0,useApi.h_)(StarredEntitiesApi.p),starredEntities=(0,useObservable.Z)((0,react.useMemo)((()=>starredEntitiesApi.starredEntitie$()),[starredEntitiesApi]),new Set),isStarredEntity=(0,react.useCallback)((entityOrRef=>starredEntities.has(getEntityRef(entityOrRef))),[starredEntities]),toggleStarredEntity=(0,react.useCallback)((entityOrRef=>starredEntitiesApi.toggleStarred(getEntityRef(entityOrRef)).then()),[starredEntitiesApi]);return{starredEntities,toggleStarredEntity,isStarredEntity}}(),entities=(0,useAsync.Z)((async()=>{if(!starredEntities.size)return[];const filter=[...starredEntities].map((ent=>(0,ref.of)(ent))).map((ref=>({kind:ref.kind,"metadata.namespace":ref.namespace,"metadata.name":ref.name})));return(await catalogApi.getEntities({filter,fields:["kind","metadata.namespace","metadata.name","metadata.title"]})).items}),[catalogApi,starredEntities]);return 0===starredEntities.size?(0,jsx_runtime.jsx)(Typography.Z,{variant:"body1",children:props.noStarredEntitiesMessage||"Click the star beside an entity name to add it to this list!"}):entities.loading?(0,jsx_runtime.jsx)(Progress.E,{}):entities.error?(0,jsx_runtime.jsx)(ResponseErrorPanel.G,{error:entities.error}):(0,jsx_runtime.jsx)(List.Z,{children:null===(_entities_value=entities.value)||void 0===_entities_value?void 0:_entities_value.sort(((a,b)=>{var _a_metadata_title,_b_metadata_title;return(null!==(_a_metadata_title=a.metadata.title)&&void 0!==_a_metadata_title?_a_metadata_title:a.metadata.name).localeCompare(null!==(_b_metadata_title=b.metadata.title)&&void 0!==_b_metadata_title?_b_metadata_title:b.metadata.name)})).map((entity=>{var _entity_metadata_title;return(0,jsx_runtime.jsxs)(ListItem.Z,{children:[(0,jsx_runtime.jsx)(Link.rU,{to:catalogEntityRoute((0,routes.h)(entity)),children:(0,jsx_runtime.jsx)(ListItemText.Z,{primary:null!==(_entity_metadata_title=entity.metadata.title)&&void 0!==_entity_metadata_title?_entity_metadata_title:entity.metadata.name})}),(0,jsx_runtime.jsx)(ListItemSecondaryAction.Z,{children:(0,jsx_runtime.jsx)(Tooltip.ZP,{title:"Remove from starred",children:(0,jsx_runtime.jsx)(IconButton.Z,{edge:"end","aria-label":"unstar",onClick:()=>toggleStarredEntity(entity),children:(0,jsx_runtime.jsx)(Star.Z,{style:{color:"#f3ba37"}})})})})]},(0,ref.eE)(entity))}))})};try{Content.displayName="Content",Content.__docgenInfo={description:"A component to display a list of starred entities for the user.",displayName:"Content",props:{noStarredEntitiesMessage:{defaultValue:null,description:"",name:"noStarredEntitiesMessage",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../plugins/home/src/homePageComponents/StarredEntities/Content.tsx#Content"]={docgenInfo:Content.__docgenInfo,name:"Content",path:"../plugins/home/src/homePageComponents/StarredEntities/Content.tsx#Content"})}catch(__react_docgen_typescript_loader_error){}}}]);