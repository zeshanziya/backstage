"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[3974],{"../plugins/search/src/components/SearchPage/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SearchPage:()=>SearchPage});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),usePrevious=__webpack_require__("../node_modules/react-use/lib/usePrevious.js"),lib=__webpack_require__("../node_modules/qs/lib/index.js"),lib_default=__webpack_require__.n(lib),dist=__webpack_require__("../node_modules/react-router/dist/index.js"),SearchContext=__webpack_require__("../plugins/search-react/src/context/SearchContext.tsx");const UrlUpdater=()=>{const location=(0,dist.zy)(),{term,setTerm,types,setTypes,pageCursor,setPageCursor,filters,setFilters}=(0,SearchContext.SQ)(),prevQueryParams=(0,usePrevious.A)(location.search);return(0,react.useEffect)((()=>{if(location.search===prevQueryParams)return;const query=lib_default().parse(location.search.substring(1),{arrayLimit:0})||{};query.filters&&setFilters(query.filters),query.query&&setTerm(query.query),query.pageCursor&&setPageCursor(query.pageCursor),query.types&&setTypes(query.types)}),[prevQueryParams,location,setTerm,setTypes,setPageCursor,setFilters]),(0,react.useEffect)((()=>{const newParams=lib_default().stringify({query:term,types,pageCursor,filters},{arrayFormat:"brackets"}),newUrl=`${window.location.pathname}?${newParams}`;window.history.replaceState(null,document.title,newUrl)}),[term,types,pageCursor,filters]),null},SearchPage=()=>{const outlet=(0,dist.P1)();return(0,jsx_runtime.jsxs)(SearchContext.Lt,{children:[(0,jsx_runtime.jsx)(UrlUpdater,{}),outlet]})}}}]);