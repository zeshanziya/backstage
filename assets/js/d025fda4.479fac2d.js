/*! For license information please see d025fda4.479fac2d.js.LICENSE.txt */
"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([[624374],{944723:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>u});var r=n(824246),i=n(511151);const o={id:"identity-resolver",title:"Sign-in Identities and Resolvers",description:"An introduction to Backstage user identities and sign-in resolvers"},s=void 0,a={id:"auth/identity-resolver",title:"Sign-in Identities and Resolvers",description:"An introduction to Backstage user identities and sign-in resolvers",source:"@site/../docs/auth/identity-resolver.md",sourceDirName:"auth",slug:"/auth/identity-resolver",permalink:"/docs/auth/identity-resolver",draft:!1,unlisted:!1,editUrl:"https://github.com/backstage/backstage/edit/master/docs/../docs/auth/identity-resolver.md",tags:[],version:"current",frontMatter:{id:"identity-resolver",title:"Sign-in Identities and Resolvers",description:"An introduction to Backstage user identities and sign-in resolvers"},sidebar:"docs",previous:{title:"VMware Cloud",permalink:"/docs/auth/vmware-cloud/provider"},next:{title:"OAuth and OpenID Connect",permalink:"/docs/auth/oauth"}},l={},u=[{value:"Quick Start",id:"quick-start",level:2},{value:"Backstage User Identity",id:"backstage-user-identity",level:2},{value:"Sign-in Resolvers",id:"sign-in-resolvers",level:2},{value:"Using Builtin Resolvers",id:"using-builtin-resolvers",level:3},{value:"Building Custom Resolvers",id:"building-custom-resolvers",level:3},{value:"Custom Ownership Resolution",id:"custom-ownership-resolution",level:3},{value:"Sign-In without Users in the Catalog",id:"sign-in-without-users-in-the-catalog",level:3},{value:"Profile Transforms",id:"profile-transforms",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsxs)(t.p,{children:["This documentation is written for ",(0,r.jsx)(t.a,{href:"/docs/backend-system/",children:"the new backend system"})," which is the default since Backstage\n",(0,r.jsx)(t.a,{href:"/docs/releases/v1.24.0",children:"version 1.24"}),". If you are still on the old backend\nsystem, you may want to read ",(0,r.jsx)(t.a,{href:"/docs/auth/identity-resolver--old",children:"its own article"}),"\ninstead, and ",(0,r.jsx)(t.a,{href:"/docs/backend-system/building-backends/migrating",children:"consider migrating"}),"!"]})}),"\n",(0,r.jsx)(t.p,{children:"By default, every Backstage auth provider is configured only for the use-case of\naccess delegation. This enables Backstage to request resources and actions from\nexternal systems on behalf of the user, for example re-triggering a build in CI."}),"\n",(0,r.jsx)(t.p,{children:"If you want to use an auth provider to sign in users, you need to explicitly\nconfigure it have sign-in enabled and also tell it how the external identities\nshould be mapped to user identities within Backstage. You do this by either\nchoosing a built-in sign in resolver, or supplying your own. Both methods are\nlisted below."}),"\n",(0,r.jsx)(t.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,r.jsxs)(t.p,{children:["Backstage projects created with ",(0,r.jsx)(t.code,{children:"npx @backstage/create-app"})," come configured with\na ",(0,r.jsx)(t.a,{href:"https://backstage.io/docs/auth/guest/provider",children:"guest auth provider"}),'. This\nprovider makes all users share a single "guest" identity. This is useful for\ntesting purposes and quickly getting started locally, but is not safe for use in\nproduction and that particular provider will refuse to work there.']}),"\n",(0,r.jsxs)(t.p,{children:["Because of this, one of the early things you want to do when standing up your\nBackstage instance is to choose a production ready auth provider. See ",(0,r.jsx)(t.a,{href:"/docs/auth/",children:"the auth overview page"})," for a full list of providers and how to install and\nconfigure them."]}),"\n",(0,r.jsx)(t.h2,{id:"backstage-user-identity",children:"Backstage User Identity"}),"\n",(0,r.jsxs)(t.p,{children:["A user identity within Backstage is built up from two main pieces of\ninformation: a user ",(0,r.jsx)(t.a,{href:"/docs/features/software-catalog/references",children:"entity reference"}),", and a set of ownership\nreferences. When a user signs in, a Backstage token is generated which is then\nused to identify the user within the Backstage ecosystem."]}),"\n",(0,r.jsx)(t.p,{children:"The user entity reference should uniquely identify the logged in user in Backstage.\nIt is encouraged that a matching user entity also exists within the Software Catalog,\nbut it is not required. If the user entity exists in the catalog it can be used to\nstore additional data about the user. There may even be some plugins that require\nthis for them to be able to function."}),"\n",(0,r.jsxs)(t.p,{children:["The ownership references are also entity references, and it is likewise\nencouraged that these entities exist within the catalog, but it is not a requirement.\nThe ownership references are used to determine what the user owns, as a set\nof references that the user claims ownership though. For example, a user\nJane (",(0,r.jsx)(t.code,{children:"user:default/jane"}),") might have the ownership references ",(0,r.jsx)(t.code,{children:"user:default/jane"}),",\n",(0,r.jsx)(t.code,{children:"group:default/team-a"}),", and ",(0,r.jsx)(t.code,{children:"group:default/admins"}),". Given these ownership claims,\nany entity that is marked as owned by either of ",(0,r.jsx)(t.code,{children:"user:jane"}),", ",(0,r.jsx)(t.code,{children:"team-a"}),", or ",(0,r.jsx)(t.code,{children:"admins"})," would\nbe considered owned by Jane."]}),"\n",(0,r.jsxs)(t.p,{children:["The ownership claims often contain the user entity reference itself, but it is not\nrequired. It is also worth noting that the ownership claims can also be used to\nresolve other relations similar to ownership, such as a claim for a ",(0,r.jsx)(t.code,{children:"maintainer"})," or\n",(0,r.jsx)(t.code,{children:"operator"})," status."]}),"\n",(0,r.jsxs)(t.p,{children:["The Backstage token that encapsulates the user identity is a JWT. The user\nentity reference is stored in the ",(0,r.jsx)(t.code,{children:"sub"})," claim of the payload, while the\nownership references are stored in a custom ",(0,r.jsx)(t.code,{children:"ent"})," claim in the old backend\nsystem but instead is made available through a user info API endpoint on the\nauth backend in the new system. Both the user and ownership references should\nalways be full entity references, as opposed to shorthands like just ",(0,r.jsx)(t.code,{children:"jane"})," or\n",(0,r.jsx)(t.code,{children:"user:jane"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"sign-in-resolvers",children:"Sign-in Resolvers"}),"\n",(0,r.jsx)(t.p,{children:"Signing in a user into Backstage requires a mapping of the user identity from the\nthird-party auth provider to a Backstage user identity. This mapping can vary quite\na lot between different organizations and auth providers, and because of that there's\nno default way to resolve user identities. The auth provider that one wants to use\nfor sign-in must instead be configured with a sign-in resolver, which is a function\nthat is responsible for creating this user identity mapping."}),"\n",(0,r.jsx)(t.p,{children:"The input to the sign-in resolver function is the result of a successful log in with\nthe given auth provider, as well as a context object that contains various helpers\nfor looking up users and issuing tokens. There are also a number of built-in sign-in\nresolvers that can be used, which are covered a bit further down."}),"\n",(0,r.jsx)(t.p,{children:"Note that while it possible to configure multiple auth providers to be used for\nsign-in, you should take care when doing so. It is best to make sure that the\ndifferent auth providers either do not have any user overlap, or that any users\nthat are able to log in with multiple providers always end up with the same\nBackstage identity. For most organizations, it makes the most sense to provide\nonly one sign-in method."}),"\n",(0,r.jsx)(t.h3,{id:"using-builtin-resolvers",children:"Using Builtin Resolvers"}),"\n",(0,r.jsx)(t.p,{children:"Most auth providers come with a set of builtin sign in providers that you can\nchoose from. They target the most common use cases, and if they fit your needs,\nyou can pick one or more of them without having to write any code at all. You\nstill have to make a choice - as mentioned above, even if there are a set of\nbuiltins, none of them are selected by default."}),"\n",(0,r.jsxs)(t.p,{children:["You set up builtin sign in resolvers using ",(0,r.jsx)(t.a,{href:"/docs/conf/",children:"your app-config"}),",\nnext to the respective provider's configuration. Here's an example for GitHub:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'title="in e.g. app-config.yaml"',children:"auth:\n  environment: development\n  providers:\n    github:\n      development:\n        clientId: ${AUTH_GITHUB_CLIENT_ID}\n        clientSecret: ${AUTH_GITHUB_CLIENT_SECRET}\n        enterpriseInstanceUrl: ${AUTH_GITHUB_ENTERPRISE_INSTANCE_URL}\n        signIn:\n          resolvers:\n            - resolver: usernameMatchingUserEntityName\n            - resolver: emailMatchingUserEntityProfileEmail\n            - resolver: emailLocalPartMatchingUserEntityName\n"})}),"\n",(0,r.jsx)(t.p,{children:"Note that in this instance it lists several resolvers, which means that the\nframework will try them one by one until one succeeds. If none of them do, the\nsign in attempt is rejected."}),"\n",(0,r.jsx)(t.p,{children:"The list of available resolvers is different for each provider, since they often\ndepend on the information model returned from the upstream provider service.\nConsult the documentation of the respective provider to find the list."}),"\n",(0,r.jsxs)(t.p,{children:["In the example above ",(0,r.jsx)(t.code,{children:"emailMatchingUserEntityProfileEmail"})," and ",(0,r.jsx)(t.code,{children:"emailLocalPartMatchingUserEntityName"})," are common to all auth providers and ",(0,r.jsx)(t.code,{children:"usernameMatchingUserEntityName"})," is specific to GitHub."]}),"\n",(0,r.jsx)(t.h3,{id:"building-custom-resolvers",children:"Building Custom Resolvers"}),"\n",(0,r.jsxs)(t.p,{children:["If the builtins don't work for you, you can also provide a completely custom\nsign-in resolver, through code. If you follow the installation instructions of\n",(0,r.jsx)(t.a,{href:"/docs/auth/",children:"one of the available providers"}),", you will likely have added a\ndependency to your backend along with a line of code and some configuration."]}),"\n",(0,r.jsx)(t.p,{children:"Using GitHub as an example, this is the relevant parts of the backend code:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",metastring:'title="in packages/backend/src/index.ts"',children:"backend.add(import('@backstage/plugin-auth-backend'));\nbackend.add(import('@backstage/plugin-auth-backend-module-github-provider'));\n"})}),"\n",(0,r.jsx)(t.p,{children:"When you want to supply a custom sign-in resolver, as a general pattern you\nremove that last import and instead construct your own provider using the\nfacilities from the same package. You can leave the config unchanged from\nbefore."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",metastring:'title="in packages/backend/src/index.ts"',children:"/* highlight-add-start */\nimport { createBackendModule } from '@backstage/backend-plugin-api';\nimport { githubAuthenticator } from '@backstage/plugin-auth-backend-module-github-provider';\nimport {\n  authProvidersExtensionPoint,\n  createOAuthProviderFactory,\n} from '@backstage/plugin-auth-node';\n\nconst customAuth = createBackendModule({\n  // This ID must be exactly \"auth\" because that's the plugin it targets\n  pluginId: 'auth',\n  // This ID must be unique, but can be anything\n  moduleId: 'custom-auth-provider',\n  register(reg) {\n    reg.registerInit({\n      deps: { providers: authProvidersExtensionPoint },\n      async init({ providers }) {\n        providers.registerProvider({\n          // This ID must match the actual provider config, e.g. addressing\n          // auth.providers.github means that this must be \"github\".\n          providerId: 'github',\n          // Use createProxyAuthProviderFactory instead if it's one of the proxy\n          // based providers rather than an OAuth based one\n          factory: createOAuthProviderFactory({\n            authenticator: githubAuthenticator,\n            async signInResolver(info, ctx) {\n              /*********************************************************************\n               * Custom resolver code goes here, see farther down in this article! *\n               * \"info\" is the sign in result from the upstream (github here), and *\n               * \"ctx\" contains useful utilities for token issuance etc.           *\n               *********************************************************************/\n            },\n          }),\n        });\n      },\n    });\n  },\n});\n/* highlight-add-end */\n\nbackend.add(import('@backstage/plugin-auth-backend'));\n/* highlight-remove-next-line */\nbackend.add(import('@backstage/plugin-auth-backend-module-github-provider'));\n/* highlight-add-next-line */\nbackend.add(customAuth);\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Check out ",(0,r.jsx)(t.a,{href:"/docs/backend-system/architecture/naming-patterns",children:"the naming patterns article"})," for what rules\napply regarding how to form valid IDs. In this example we also put the module\ndeclaration directly in ",(0,r.jsx)(t.code,{children:"packages/backend/src/index.ts"})," but that's just for\nsimplicity. You can place it anywhere you like, including in other packages, and\nimport from there if you prefer."]}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"createOAuthProviderFactory"})," / ",(0,r.jsx)(t.code,{children:"createProxyAuthProviderFactory"})," functions\nhave additional options for profile and state transforms - not covered here, but\ngood to know about if you need them."]}),"\n",(0,r.jsx)(t.p,{children:"So what would the body of a typical sign in resolver callback look like? Here's\nan example:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"// ...\nasync signInResolver(info, ctx) {\n  const { profile: { email } } = info;\n\n  // Profiles are not always guaranteed to to have an email address.\n  // You can also find more provider-specific information in `info.result`.\n  // It typically contains a `fullProfile` object as well as ID and/or access\n  // tokens that you can use for additional lookups.\n  if (!email) {\n    throw new Error('User profile contained no email');\n  }\n\n  // You can add your own custom validation logic here.\n  // Logins can be prevented by throwing an error like the one above.\n  myEmailValidator(email);\n\n  // This example resolver simply uses the local part of the email as the name.\n  const [name] = email.split('@');\n\n  // This helper function handles sign-in by looking up a user in the catalog.\n  // The lookup can be done either by reference, annotations, or custom filters.\n  //\n  // The helper also issues a token for the user, using the standard group\n  // membership logic to determine the ownership references of the user.\n  //\n  // There are a number of other methods on the ctx, feel free to explore them!\n  return ctx.signInWithCatalogUser({\n    entityRef: { name },\n  });\n}\n"})}),"\n",(0,r.jsx)(t.p,{children:"If you throw an error in the sign in resolver function, the sign in attempt is\nimmediately rejected, and the error details are presented in the user interface."}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"ctx"})," context ",(0,r.jsx)(t.a,{href:"https://backstage.io/docs/reference/plugin-auth-node.authresolvercontext/",children:"has several useful functions"}),"\nfor issuing tokens in various ways."]}),"\n",(0,r.jsx)(t.h3,{id:"custom-ownership-resolution",children:"Custom Ownership Resolution"}),"\n",(0,r.jsxs)(t.p,{children:["If you want to have more control over the membership resolution and token generation\nthat happens during sign-in you can replace ",(0,r.jsx)(t.code,{children:"ctx.signInWithCatalogUser"})," with a set\nof lower-level calls:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"// File: packages/backend/src/plugins/auth.ts\nimport { getDefaultOwnershipEntityRefs } from '@backstage/plugin-auth-backend';\n\n// ...\nasync signInResolver({ profile: { email} }, ctx) {\n  if (!email) {\n    throw new Error('User profile contained no email');\n  }\n\n  // This step calls the catalog to look up a user entity. You could for example\n  // replace it with a call to a different external system.\n  const { entity } = await ctx.findCatalogUser({\n    annotations: {\n      'acme.org/email': email,\n    },\n  });\n\n  // In this step we extract the ownership references from the user entity using\n  // the standard logic. It uses a reference to the entity itself, as well as the\n  // target of each `memberOf` relation where the target is of the kind `Group`.\n  //\n  // If you replace the catalog lookup with something that does not return\n  // an entity you will need to replace this step as well.\n  //\n  // You might also replace it if you for example want to filter out certain groups.\n  //\n  // Note that `getDefaultOwnershipEntityRefs` only includes groups to which the\n  // user has a direct MEMBER_OF relationship. It's perfectly fine to include\n  // groups that the user is transitively part of in the claims array, but the\n  // catalog doesn't currently provide a direct way of accessing this list of\n  // groups.\n  const ownershipRefs = getDefaultOwnershipEntityRefs(entity);\n\n  // The last step is to issue the token, where we might provide more options in the\n  // future.\n  return ctx.issueToken({\n    claims: {\n      sub: stringifyEntityRef(entity),\n      ent: ownershipRefs,\n    },\n  });\n}\n"})}),"\n",(0,r.jsx)(t.h3,{id:"sign-in-without-users-in-the-catalog",children:"Sign-In without Users in the Catalog"}),"\n",(0,r.jsx)(t.p,{children:"While populating the catalog with organizational data unlocks more powerful ways\nto browse your software ecosystem, it might not always be a viable or prioritized\noption. However, even if you do not have user entities populated in your catalog, you\ncan still sign in users. As there are currently no built-in sign-in resolvers for\nthis scenario you will need to implement your own."}),"\n",(0,r.jsx)(t.p,{children:"Signing in a user that doesn't exist in the catalog is as simple as skipping the\ncatalog lookup step from the above example. Rather than looking up the user, we\ninstead immediately issue a token using whatever information is available. One caveat\nis that it can be tricky to determine the ownership references, although it can\nbe achieved for example through a lookup to an external service. You typically\nwant to at least use the user itself as a lone ownership reference."}),"\n",(0,r.jsx)(t.p,{children:"Because we no longer use the catalog as an allow-list of users, it is often important\nthat you limit what users are allowed to sign in. This could be a simple email domain\ncheck like in the example below, or you might for example look up the GitHub organizations\nthat the user belongs to using the user access token in the provided result object."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"import { stringifyEntityRef, DEFAULT_NAMESPACE } from '@backstage/catalog-model';\n\n// ...\nasync signInResolver({ profile }, ctx) {\n  if (!profile.email) {\n    throw new Error(\n      'Login failed, user profile does not contain an email',\n    );\n  }\n  // Split the email into the local part and the domain.\n  const [localPart, domain] = profile.email.split('@');\n\n  // Next we verify the email domain. It is recommended to include this\n  // kind of check if you don't look up the user in an external service.\n  if (domain !== 'acme.org') {\n    throw new Error(\n      `Login failed, '${profile.email}' does not belong to the expected domain`,\n    );\n  }\n\n  // By using `stringifyEntityRef` we ensure that the reference is formatted correctly\n  const userEntity = stringifyEntityRef({\n    kind: 'User',\n    name: localPart,\n    namespace: DEFAULT_NAMESPACE,\n  });\n  return ctx.issueToken({\n    claims: {\n      sub: userEntity,\n      ent: [userEntity],\n    },\n  });\n}\n"})}),"\n",(0,r.jsx)(t.h2,{id:"profile-transforms",children:"Profile Transforms"}),"\n",(0,r.jsx)(t.p,{children:"Similar to a custom sign-in resolver, you can also write a custom profile transform\nfunction which is used to verify and convert the auth response into the profile\nthat will be presented to the user. This is where you can customize things like\ndisplay name and profile picture."}),"\n",(0,r.jsx)(t.p,{children:"This is also the place where you can do authorization and validation of the user\nand throw errors if the user should not be allowed access in Backstage."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"const customAuth = createBackendModule({\n  // This ID must be exactly \"auth\" because that's the plugin it targets\n  pluginId: 'auth',\n  // This ID must be unique, but can be anything\n  moduleId: 'custom-auth-provider',\n  register(reg) {\n    reg.registerInit({\n      deps: { providers: authProvidersExtensionPoint },\n      async init({ providers }) {\n        providers.registerProvider({\n          // This ID must match the actual provider config, e.g. addressing\n          // auth.providers.github means that this must be \"github\".\n          providerId: 'github',\n          // Use createProxyAuthProviderFactory instead if it's one of the proxy\n          // based providers rather than an OAuth based one\n          factory: createOAuthProviderFactory({\n            authenticator: githubAuthenticator,\n            async profileTransform(result, ctx) {\n              /**********************************************************************\n               * Custom transform code goes here!                                   *\n               * \"info\" is the sign in result from the upstream (github here), and  *\n               * \"ctx\" contains useful utilities.                                   *\n               **********************************************************************/\n              return {\n                profile: {\n                  email,\n                  picture,\n                  displayName,\n                },\n              };\n            },\n          }),\n        });\n      },\n    });\n  },\n});\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Remember to ",(0,r.jsx)(t.code,{children:"backend.add"})," the created module just like above."]})]})}function h(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},371426:(e,t,n)=>{var r=n(827378),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},541535:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,j={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)k.call(t,i)&&!_.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:j.current}}function E(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function S(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+S(l,0):o,x(s)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),R(s,t,i,"",(function(e){return e}))):null!=s&&(E(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",x(e))for(var u=0;u<e.length;u++){var c=o+S(a=e[u],u);l+=R(a,t,i,c,s)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=R(a=a.value,t,i,c=o+S(a,u++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function C(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var B={current:null},U={transition:null},A={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:U,ReactCurrentOwner:j};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=j.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)k.call(t,u)&&!_.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:C}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=U.transition;U.transition={};try{e()}finally{U.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return B.current.useCallback(e,t)},t.useContext=function(e){return B.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return B.current.useDeferredValue(e)},t.useEffect=function(e,t){return B.current.useEffect(e,t)},t.useId=function(){return B.current.useId()},t.useImperativeHandle=function(e,t,n){return B.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return B.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return B.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return B.current.useMemo(e,t)},t.useReducer=function(e,t,n){return B.current.useReducer(e,t,n)},t.useRef=function(e){return B.current.useRef(e)},t.useState=function(e){return B.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return B.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return B.current.useTransition()},t.version="18.2.0"},827378:(e,t,n)=>{e.exports=n(541535)},824246:(e,t,n)=>{e.exports=n(371426)},511151:(e,t,n)=>{n.d(t,{Z:()=>a,a:()=>s});var r=n(667294);const i={},o=r.createContext(i);function s(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);