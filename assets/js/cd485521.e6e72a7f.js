/*! For license information please see cd485521.e6e72a7f.js.LICENSE.txt */
"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([[859947],{853792:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>u});var r=t(824246),a=t(511151);const o={id:"internationalization",title:"Internationalization (Experimental)",description:"Documentation on adding internationalization to the plugin"},s=void 0,i={id:"plugins/internationalization",title:"Internationalization (Experimental)",description:"Documentation on adding internationalization to the plugin",source:"@site/../docs/plugins/internationalization.md",sourceDirName:"plugins",slug:"/plugins/internationalization",permalink:"/docs/plugins/internationalization",draft:!1,unlisted:!1,editUrl:"https://github.com/backstage/backstage/edit/master/docs/../docs/plugins/internationalization.md",tags:[],version:"current",frontMatter:{id:"internationalization",title:"Internationalization (Experimental)",description:"Documentation on adding internationalization to the plugin"},sidebar:"docs",previous:{title:"Composability System",permalink:"/docs/plugins/composability"},next:{title:"Plugin Analytics",permalink:"/docs/plugins/analytics"}},l={},u=[{value:"Overview",id:"overview",level:2},{value:"For a plugin developer",id:"for-a-plugin-developer",level:2},{value:"Guidelines for <code>i18n</code> messages and keys",id:"guidelines-for-i18n-messages-and-keys",level:3},{value:"Key names",id:"key-names",level:4},{value:"Common Key names",id:"common-key-names",level:4},{value:"Key reuse",id:"key-reuse",level:4},{value:"Flat keys",id:"flat-keys",level:4},{value:"Plurals",id:"plurals",level:4},{value:"For an application developer overwrite plugin messages",id:"for-an-application-developer-overwrite-plugin-messages",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["The Backstage core function provides internationalization for plugins. The underlying library is ",(0,r.jsx)(n.a,{href:"https://www.i18next.com/",children:(0,r.jsx)(n.code,{children:"i18next"})})," with some additional Backstage typescript magic for type safety with keys."]}),"\n",(0,r.jsx)(n.h2,{id:"for-a-plugin-developer",children:"For a plugin developer"}),"\n",(0,r.jsxs)(n.p,{children:["When you are creating your plugin, you have the possibility to use ",(0,r.jsx)(n.code,{children:"createTranslationRef"})," to define all messages for your plugin. For example:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { createTranslationRef } from '@backstage/core-plugin-api/alpha';\n\n/** @alpha */\nexport const myPluginTranslationRef = createTranslationRef({\n  id: 'plugin.my-plugin',\n  messages: {\n    indexPage: {\n      title: 'All your components',\n      createButtonTitle: 'Create new component',\n    },\n    entityPage: {\n      notFound: 'Entity not found',\n    },\n  },\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:"And then use these messages in your components like:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useTranslationRef } from '@backstage/core-plugin-api/alpha';\n\nconst { t } = useTranslationRef(myPluginTranslationRef);\n\nreturn (\n  <PageHeader title={t('indexPage.title')}>\n    <Button onClick={handleCreateComponent}>\n      {t('indexPage.createButtonTitle')}\n    </Button>\n  </PageHeader>\n);\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You will see how the initial dictionary structure and nesting get converted into dot notation, so we encourage ",(0,r.jsx)(n.code,{children:"camelCase"})," in key names and lean on the nesting structure to separate keys."]}),"\n",(0,r.jsxs)(n.h3,{id:"guidelines-for-i18n-messages-and-keys",children:["Guidelines for ",(0,r.jsx)(n.code,{children:"i18n"})," messages and keys"]}),"\n",(0,r.jsxs)(n.p,{children:["The API for ",(0,r.jsx)(n.code,{children:"i18n"})," messages and keys can be pretty tricky to get right, as it's a pretty flexible API. We've put together some guidelines to help you get started that encourage good practices when thinking about translating plugins:"]}),"\n",(0,r.jsx)(n.h4,{id:"key-names",children:"Key names"}),"\n",(0,r.jsx)(n.p,{children:"When defining messages it is recommended to use a nested structure that represents the semantic hierarchy in your translations. This allows for better organization and understanding of the structure. For example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export const myPluginTranslationRef = createTranslationRef({\n  id: 'plugin.my-plugin',\n  messages: {\n    dashboardPage: {\n      title: 'All your components',\n      subtitle: 'Create new component',\n      widgets: {\n        weather: {\n          title: 'Weather',\n          description: 'Shows the weather',\n        },\n        calendar: {\n          title: 'Calendar',\n          description: 'Shows the calendar',\n        },\n      },\n    },\n    entityPage: {\n      notFound: 'Entity not found',\n    },\n  },\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:"Think about the semantic placement of content rather than the text content itself. Group related translations under a common prefix, and use nesting to represent relationships between different parts of your application. It's good to start grouping under extensions, page sections, or visual scopes and experiences."}),"\n",(0,r.jsx)(n.p,{children:"Translations should avoid using their own text content as key where possible, as this can lead to confusion if the translation changes. Instead prefer to use keys that describe the location or usage of the text."}),"\n",(0,r.jsx)(n.h4,{id:"common-key-names",children:"Common Key names"}),"\n",(0,r.jsx)(n.p,{children:"This list is intended to grow over time, but below are some examples of common key names and patterns that we encourage you to use where possible:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"${page}.title"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"${page}.subtitle"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"${page}.description"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"${page}.header.title"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"key-reuse",children:"Key reuse"}),"\n",(0,r.jsx)(n.p,{children:"Reusing the same key in multiple places is discouraged. This helps prevent ambiguity, and instead keeps the usage of each key as clear as possible. Consider creating duplicate keys that are grouped under a semantic section instead."}),"\n",(0,r.jsx)(n.h4,{id:"flat-keys",children:"Flat keys"}),"\n",(0,r.jsx)(n.p,{children:"Avoid a flat key structure at the root level, as it can lead to naming conflicts and make the translation file harder to manage and change evolve over time. Instead, group translations under a common prefix."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export const myPluginTranslationRef = createTranslationRef({\n  id: 'plugin.my-plugin',\n  messages: {\n    // this is BAD\n    title: 'My page',\n    subtitle: 'My subtitle',\n    // this is GOOD\n    dashboardPage: {\n      header: {\n        title: 'All your components',\n        subtitle: 'Create new component',\n      },\n    },\n  },\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"plurals",children:"Plurals"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"i18next"})," library, which is used as the underlying implementation, has built-in support for pluralization. You can use this feature as is described in ",(0,r.jsx)(n.a,{href:"https://www.i18next.com/translation-function/plurals",children:"the documentation"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"We encourage you to use this feature and avoid creating different key prefixes for pluralized content. For example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export const myPluginTranslationRef = createTranslationRef({\n  id: 'plugin.my-plugin',\n  messages: {\n    dashboardPage: {\n      title: 'All your components',\n      subtitle: 'Create new component',\n      cards: {\n        title_one: 'You have one card',\n        title_two: 'You have two cards',\n        title_other: 'You have many cards ({{count}})',\n      },\n    },\n    entityPage: {\n      notFound: 'Entity not found',\n    },\n  },\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"for-an-application-developer-overwrite-plugin-messages",children:"For an application developer overwrite plugin messages"}),"\n",(0,r.jsx)(n.p,{children:"Step 1: Create translation resources"}),"\n",(0,r.jsx)(n.p,{children:"You should separate different translations to their own files and import them in the main file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// packages/app/src/translations/userSettings.ts\n\nimport { createTranslationResource } from '@backstage/core-plugin-api/alpha';\nimport { userSettingsTranslationRef } from '@backstage/plugin-user-settings/alpha';\n\nexport const userSettingsTranslations = createTranslationResource({\n  ref: userSettingsTranslationRef,\n  translations: {\n    zh: () => import('./userSettings-zh'),\n  },\n});\n\n// packages/app/src/translations/userSettings-zh.ts\nimport { userSettingsTranslationRef } from '@backstage/plugin-user-settings/alpha';\n\nconst zh = createTranslationMessages({\n  ref: userSettingsTranslationRef,\n  full: false, // False means that this is a partial translation\n  messages: {\n    'languageToggle.title': '\u8bed\u8a00',\n    'languageToggle.select': '\u9009\u62e9{{language}}',\n  },\n});\n\nexport default zh;\n"})}),"\n",(0,r.jsx)(n.p,{children:"It's also possible to export the list of messages directly:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// packages/app/src/translations/userSettings-zh.ts\nexport default {\n  'languageToggle.title': '\u8bed\u8a00',\n  'languageToggle.select': '\u9009\u62e9{{language}}',\n  'languageToggle.description': '\u5207\u6362\u8bed\u8a00',\n  'themeToggle.title': '\u4e3b\u9898',\n  'themeToggle.description': '\u5207\u6362\u4e3b\u9898',\n  'themeToggle.select': '\u9009\u62e9{{theme}}',\n  'themeToggle.selectAuto': '\u9009\u62e9\u81ea\u52a8\u4e3b\u9898',\n  'themeToggle.names.auto': '\u81ea\u52a8',\n  'themeToggle.names.dark': '\u6697\u9ed1',\n  'themeToggle.names.light': '\u660e\u4eae',\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You should change ",(0,r.jsx)(n.code,{children:"zh"})," under the translations object to your local language."]}),"\n",(0,r.jsxs)(n.p,{children:["Step 2: Config translations in ",(0,r.jsx)(n.code,{children:"packages/app/src/App.tsx"})]}),"\n",(0,r.jsx)(n.p,{children:"In an app you can both override the default messages, as well as register translations for additional languages:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-diff",children:"+ import { userSettingsTranslations } from './translations/userSettings';\n\n const app = createApp({\n+  __experimentalTranslations: {\n+    availableLanguages: ['en', 'zh'],\n+    resources: [userSettingsTranslations],\n+  },\n })\n"})}),"\n",(0,r.jsx)(n.p,{children:"Step 3: Check everything is working correctly"}),"\n",(0,r.jsxs)(n.p,{children:["Go to ",(0,r.jsx)(n.code,{children:"Settings"})," page, you should see change language buttons just under change theme buttons. And then switch language, you should see language had changed"]})]})}function d(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},371426:(e,n,t)=>{var r=t(827378),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,n,t){var r,o={},u=null,c=null;for(r in void 0!==t&&(u=""+t),void 0!==n.key&&(u=""+n.key),void 0!==n.ref&&(c=n.ref),n)s.call(n,r)&&!l.hasOwnProperty(r)&&(o[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===o[r]&&(o[r]=n[r]);return{$$typeof:a,type:e,key:u,ref:c,props:o,_owner:i.current}}n.Fragment=o,n.jsx=u,n.jsxs=u},541535:(e,n)=>{var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,n,t){this.props=e,this.context=n,this.refs=m,this.updater=t||h}function x(){}function v(e,n,t){this.props=e,this.context=n,this.refs=m,this.updater=t||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,n){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=y.prototype;var j=v.prototype=new x;j.constructor=v,g(j,y.prototype),j.isPureReactComponent=!0;var b=Array.isArray,k=Object.prototype.hasOwnProperty,w={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function T(e,n,r){var a,o={},s=null,i=null;if(null!=n)for(a in void 0!==n.ref&&(i=n.ref),void 0!==n.key&&(s=""+n.key),n)k.call(n,a)&&!_.hasOwnProperty(a)&&(o[a]=n[a]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===o[a]&&(o[a]=l[a]);return{$$typeof:t,type:e,key:s,ref:i,props:o,_owner:w.current}}function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===t}var R=/\/+/g;function C(e,n){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return n[e]}))}(""+e.key):n.toString(36)}function P(e,n,a,o,s){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l=!1;if(null===e)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case t:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+C(l,0):o,b(s)?(a="",null!=e&&(a=e.replace(R,"$&/")+"/"),P(s,n,a,"",(function(e){return e}))):null!=s&&(S(s)&&(s=function(e,n){return{$$typeof:t,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}(s,a+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(R,"$&/")+"/")+e)),n.push(s)),1;if(l=0,o=""===o?".":o+":",b(e))for(var u=0;u<e.length;u++){var c=o+C(i=e[u],u);l+=P(i,n,a,c,s)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),u=0;!(i=e.next()).done;)l+=P(i=i.value,n,a,c=o+C(i,u++),s);else if("object"===i)throw n=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function E(e,n,t){if(null==e)return e;var r=[],a=0;return P(e,r,"","",(function(e){return n.call(t,e,a++)})),r}function $(e){if(-1===e._status){var n=e._result;(n=n()).then((function(n){0!==e._status&&-1!==e._status||(e._status=1,e._result=n)}),(function(n){0!==e._status&&-1!==e._status||(e._status=2,e._result=n)})),-1===e._status&&(e._status=0,e._result=n)}if(1===e._status)return e._result.default;throw e._result}var z={current:null},O={transition:null},I={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:O,ReactCurrentOwner:w};function A(){throw Error("act(...) is not supported in production builds of React.")}n.Children={map:E,forEach:function(e,n,t){E(e,(function(){n.apply(this,arguments)}),t)},count:function(e){var n=0;return E(e,(function(){n++})),n},toArray:function(e){return E(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},n.Component=y,n.Fragment=a,n.Profiler=s,n.PureComponent=v,n.StrictMode=o,n.Suspense=c,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,n.act=A,n.cloneElement=function(e,n,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=g({},e.props),o=e.key,s=e.ref,i=e._owner;if(null!=n){if(void 0!==n.ref&&(s=n.ref,i=w.current),void 0!==n.key&&(o=""+n.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in n)k.call(n,u)&&!_.hasOwnProperty(u)&&(a[u]=void 0===n[u]&&void 0!==l?l[u]:n[u])}var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}return{$$typeof:t,type:e.type,key:o,ref:s,props:a,_owner:i}},n.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},n.createElement=T,n.createFactory=function(e){var n=T.bind(null,e);return n.type=e,n},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:u,render:e}},n.isValidElement=S,n.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:$}},n.memo=function(e,n){return{$$typeof:d,type:e,compare:void 0===n?null:n}},n.startTransition=function(e){var n=O.transition;O.transition={};try{e()}finally{O.transition=n}},n.unstable_act=A,n.useCallback=function(e,n){return z.current.useCallback(e,n)},n.useContext=function(e){return z.current.useContext(e)},n.useDebugValue=function(){},n.useDeferredValue=function(e){return z.current.useDeferredValue(e)},n.useEffect=function(e,n){return z.current.useEffect(e,n)},n.useId=function(){return z.current.useId()},n.useImperativeHandle=function(e,n,t){return z.current.useImperativeHandle(e,n,t)},n.useInsertionEffect=function(e,n){return z.current.useInsertionEffect(e,n)},n.useLayoutEffect=function(e,n){return z.current.useLayoutEffect(e,n)},n.useMemo=function(e,n){return z.current.useMemo(e,n)},n.useReducer=function(e,n,t){return z.current.useReducer(e,n,t)},n.useRef=function(e){return z.current.useRef(e)},n.useState=function(e){return z.current.useState(e)},n.useSyncExternalStore=function(e,n,t){return z.current.useSyncExternalStore(e,n,t)},n.useTransition=function(){return z.current.useTransition()},n.version="18.3.1"},827378:(e,n,t)=>{e.exports=t(541535)},824246:(e,n,t)=>{e.exports=t(371426)},511151:(e,n,t)=>{t.d(n,{Z:()=>i,a:()=>s});var r=t(667294);const a={},o=r.createContext(a);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);